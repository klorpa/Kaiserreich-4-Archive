IRE_has_bm = {
	OR = {
		has_idea = IRE_black_monday_1
		has_idea = IRE_black_monday_2
		has_idea = IRE_black_monday_3
		has_idea = IRE_black_monday_4
		has_idea = IRE_black_monday_5
		has_idea = IRE_black_monday_6
		has_idea = IRE_black_monday_7
		has_idea = IRE_black_monday_8
		has_idea = IRE_black_monday_9
		has_idea = IRE_black_monday_10
		has_idea = IRE_black_monday_11
		has_idea = IRE_black_monday_12
		has_idea = IRE_black_monday_13
		has_idea = IRE_black_monday_14
		has_idea = IRE_black_monday_15
		has_idea = IRE_balanced_budget_1
		has_idea = IRE_balanced_budget_2
	}
	NOT = { has_country_flag = IRE_bm_failed }
}
IRE_has_parliamentary_govt = {
	OR = {
		has_country_flag = IRE_govt_sf_collins
		has_country_flag = IRE_govt_sf_mulcahy
		has_country_flag = IRE_govt_sf_megacollins
		has_country_flag = IRE_govt_sc_ndp
		has_country_flag = IRE_govt_cursed_coalition
		has_country_flag = IRE_govt_soccon_puppet
		has_country_flag = IRE_govt_marlib_puppet
		has_country_flag = IRE_govt_labour_ndp_cnat
		has_country_flag = IRE_govt_labour_cnat_plp
	}
}
IRE_has_reactionary_govt = {
	OR = {
		has_country_flag = IRE_govt_blueshirt_coup
		has_country_flag = IRE_govt_parliamentary_an
		has_country_flag = IRE_govt_abstentionist_an
		has_country_flag = IRE_govt_pataut_puppet
		has_country_flag = IRE_govt_natpop_puppet
	}
}
IRE_has_socialist_govt = {
	OR = {
		has_country_flag = IRE_govt_se
		has_country_flag = IRE_govt_isp
		has_country_flag = IRE_govt_plp
		has_country_flag = IRE_govt_plp_labour
		has_country_flag = IRE_govt_totalist_puppet
		has_country_flag = IRE_govt_syndie_puppet
		is_in_faction_with = INT
	}
}
IRE_has_nonsocialist_republic_govt = {
	IRE_has_socialist_govt = no
	NOT = { has_government = national_populist }
}
IRE_has_totalist_govt = {
	OR = {
		has_country_flag = IRE_govt_se
		has_country_flag = IRE_govt_totalist_puppet
	}
}
IRE_has_syndie_govt = {
	OR = {
		has_country_flag = IRE_govt_isp
		has_country_flag = IRE_govt_syndie_puppet
	}
}
IRE_has_radsoc_in_coalition = {
	OR = {
		has_country_flag = IRE_govt_labour_cnat_plp
		has_country_flag = IRE_govt_plp_labour
		has_country_flag = IRE_govt_plp
	}
}
IRE_has_socdem_in_coalition = {
	OR = {
		has_country_flag = IRE_govt_labour_temp
		has_country_flag = IRE_govt_labour_ndp_cnat
		has_country_flag = IRE_govt_labour_cnat_plp
		has_country_flag = IRE_govt_plp_labour
	}
}
IRE_has_soclib_in_coalition = {
	OR = {
		has_country_flag = IRE_govt_labour_cnat_plp
		has_country_flag = IRE_govt_labour_ndp_cnat
	}
}
IRE_has_marlib_in_coalition = {
	OR = {
		has_country_flag = IRE_govt_labour_ndp_cnat
		has_country_flag = IRE_govt_sc_ndp
		has_country_flag = IRE_govt_marlib_puppet
	}
}
IRE_has_soccon_in_coalition = {
	OR = {
		has_country_flag = IRE_govt_sc_temp
		has_country_flag = IRE_govt_sc_ndp
		has_country_flag = IRE_govt_cursed_coalition
		has_country_flag = IRE_govt_soccon_puppet
		has_country_flag = IRE_govt_sf_megacollins
	}
}
IRE_has_autdem_govt = {
	OR = {
		has_country_flag = IRE_govt_sf_collins
		has_country_flag = IRE_govt_sf_mulcahy
		has_country_flag = IRE_govt_sf_megacollins
	}
}
IRE_has_pataut_in_coalition = {
	OR = {
		has_country_flag = IRE_govt_cursed_coalition
		has_country_flag = IRE_govt_blueshirt_coup
		has_country_flag = IRE_govt_parliamentary_an
		has_country_flag = IRE_govt_abstentionist_an
		has_country_flag = IRE_govt_pataut_puppet
	}
}
IRE_has_pataut_govt = {
	OR = {
		has_country_flag = IRE_govt_blueshirt_coup
		has_country_flag = IRE_govt_parliamentary_an
		has_country_flag = IRE_govt_pataut_puppet
	}
}
IRE_has_natpop_govt = {
	OR = {
		has_country_flag = IRE_govt_abstentionist_an
		has_country_flag = IRE_govt_natpop_puppet
	}
}
IRE_has_puppet_govt = {
	OR = {
		has_country_flag = IRE_govt_marlib_puppet
		has_country_flag = IRE_govt_soccon_puppet
		has_country_flag = IRE_govt_pataut_puppet
		has_country_flag = IRE_govt_natpop_puppet
		has_country_flag = IRE_govt_syndie_puppet
		has_country_flag = IRE_govt_totalist_puppet
	}
}

IRE_sf_election = {
	OR = {
		has_country_flag = IRE_polpath_sf_collins
		has_country_flag = IRE_polpath_sf_mulcahy
	}
}
IRE_sc_election = {
	OR = {
		has_country_flag = IRE_elecpath_centrist
		has_country_flag = IRE_elecpath_centrist_couped
		has_country_flag = IRE_elecpath_cursed
	}
}
IRE_lab_election = {
	OR = {
		has_country_flag = IRE_elecpath_compromise
		has_country_flag = IRE_elecpath_radical
		has_country_flag = IRE_elecpath_radical_couped
	}
}

IRE_plp_electable = {
	has_completed_focus = IRE_repeal_civil_restrictions
	has_country_flag = IRE_gateway_IRE_victory
	NOT = { has_country_flag = IRE_govt_cursed_coalition }
	IRE_has_radsoc_in_coalition = no
	GER = { exists = no }
#	AUS = { is_faction_leader = no }		### IRE eventual TO-DO
	INT = { is_faction_leader = yes }
	is_in_faction = no
	OR = {
		has_war = no
		all_enemy_country = { has_war_with = INT }
	}
	NOT = {
		is_guaranteed_by = GER
		is_guaranteed_by = USA
		is_guaranteed_by = TEX
		is_guaranteed_by = PSA
		is_guaranteed_by = NEE
	}
	NOT = {
		has_country_flag = IRE_got_guarantee_GER
		has_country_flag = IRE_got_guarantee_USA
		has_country_flag = IRE_got_guarantee_TEX
		has_country_flag = IRE_got_guarantee_PSA
		has_country_flag = IRE_got_guarantee_NEE
	}
	OR = {
		AND = {
			has_global_flag = USA_civil_war_over_flag
			OR = {
				has_country_flag = IRE_rejected_guarantee_USA
				NOT = { country_exists = USA }
				USA = { same_government_type_as_ROOT = no }
				USA = { is_subject = yes }
			}
			OR = {
				has_country_flag = IRE_rejected_guarantee_TEX
				NOT = { country_exists = TEX }
				TEX = { same_government_type_as_ROOT = no }
			}
			OR = {
				has_country_flag = IRE_rejected_guarantee_PSA
				NOT = { country_exists = PSA }
				PSA = { same_government_type_as_ROOT = no }
			}
			OR = {
				has_country_flag = IRE_rejected_guarantee_NEE
				NOT = { country_exists = NEE }
				NEE = { same_government_type_as_ROOT = no }
			}
		}
		AND = {
			NOT = {
				has_global_flag = USA_civil_war_over_flag
				CAN = { has_war_with = CSA }
				country_exists = USA
				country_exists = TEX
				country_exists = PSA
				country_exists = NEE
			}
		}
	}
}

IRE_political_tree_done = {
	OR = {
		has_idea = IRE_sf_mc_end_idea
		has_idea = IRE_sf_mc_end_capstone_idea
		has_idea = IRE_sf_rm_end_idea
		has_idea = IRE_sf_rm_end_capstone_idea
		has_idea = IRE_sc_ndp_end_idea
		has_idea = IRE_sc_ndp_end_capstone_idea
		has_idea = IRE_sc_an_end_idea
		has_idea = IRE_sc_an_end_capstone_idea
		has_idea = IRE_sc_an_jjok_idea
		has_idea = IRE_sc_an_jjok_capstone_idea
		has_idea = IRE_lab_idea_4_ndp
		has_idea = IRE_lab_idea_5_ndp
		has_idea = IRE_lab_idea_4_plp
		has_idea = IRE_lab_idea_5_ndp
		has_idea = IRE_lab_idea_5_plp_cnat
		has_idea = IRE_lab_idea_5_plp
		AND = {
			has_country_flag = IRE_gateway_GER_victory
			has_country_flag = IRE_govt_parliamentary_an
			has_completed_focus = IRE_end_class_war
		}
	}
}

IRE_started_41_tree = {
	OR = {
		has_completed_focus = IRE_later_plp
		has_completed_focus = IRE_later_labour
		has_completed_focus = IRE_later_cnat
		has_completed_focus = IRE_later_sf
		has_completed_focus = IRE_later_ndp
		has_completed_focus = IRE_later_sc
		has_completed_focus = IRE_later_an
	}
}

IRE_has_monarchist_flag = {
	OR = {
		has_cosmetic_tag = IRE_monarchist
		has_cosmetic_tag = IRE_monarchist_gael
		has_cosmetic_tag = IRE_regency
		has_cosmetic_tag = IRE_regency_gael
	}
}

IRE_check_guarantor_ideology = {
	if = { limit = { FROM = { has_socialist_government = yes } }
		has_socialist_government = yes
		ROOT = { has_socialist_government = yes }
	}
	if = { limit = { FROM = { has_democratic_government = yes } }
		has_democratic_government = yes
		ROOT = { has_democratic_government = yes }
	}
	if = { limit = { FROM = { has_dictatorship_government = yes } }
		has_dictatorship_government = yes
		ROOT = { has_dictatorship_government = yes }
	}
}

IRE_check_postacw_mismatch_ideology = {
	if = { limit = { has_socialist_government = yes }
		has_socialist_government = yes
		ROOT = { has_socialist_government = no }
	}
	if = { limit = { has_democratic_government = yes }
		has_democratic_government = yes
		ROOT = { has_democratic_government = no }
	}
	if = { limit = { has_dictatorship_government = yes }
		has_dictatorship_government = yes
		ROOT = { has_dictatorship_government = no }
	}
}

IRE_check_postacw_faction = {
	if = {
		limit = { country_exists = USA }
		OR = {
			if = {
				limit = { has_country_flag = IRE_got_guarantee_USA }
				NOT = { has_country_flag = IRE_got_guarantee_USA }
			}
			else = { has_country_flag = IRE_rejected_guarantee_USA }
			USA = { IRE_check_postacw_mismatch_ideology = yes }
			USA = { is_subject = yes }
		}
	}
	if = {
		limit = { country_exists = TEX }
		OR = {
			if = {
				limit = { has_country_flag = IRE_got_guarantee_TEX }
				NOT = { has_country_flag = IRE_got_guarantee_TEX }
			}
			else = { has_country_flag = IRE_rejected_guarantee_TEX }
			TEX = { IRE_check_postacw_mismatch_ideology = yes }
		}
	}
	if = {
		limit = { country_exists = PSA }
		OR = {
			if = {
				limit = { has_country_flag = IRE_got_guarantee_PSA }
				NOT = { has_country_flag = IRE_got_guarantee_PSA }
			}
			else = { has_country_flag = IRE_rejected_guarantee_PSA }
			PSA = { IRE_check_postacw_mismatch_ideology = yes }
		}
	}
	if = {
		limit = { country_exists = NEE }
		OR = {
			if = {
				limit = { has_country_flag = IRE_got_guarantee_NEE }
				NOT = { has_country_flag = IRE_got_guarantee_NEE }
			}
			else = { has_country_flag = IRE_rejected_guarantee_NEE }
			NEE = { IRE_check_postacw_mismatch_ideology = yes }
		}
	}
}

IRE_gateway_finished = {
	OR = {
		has_country_flag = IRE_gateway_IRE_victory
		has_country_flag = IRE_gateway_GER_victory
		has_country_flag = IRE_gateway_ENG_victory
	}
}

### Influence mechanic ###

IRE_either_influence_at_least = {
	custom_trigger_tooltip = {
		tooltip = IRE_either_influence_at_least_tt
		OR = {
			check_variable = { var = ENG.IRE_gateway_influence value = IRE_either_at_least compare = greater_than_or_equals }
			check_variable = { var = GER.IRE_gateway_influence value = IRE_either_at_least compare = greater_than_or_equals }
		}
	}
}

IRE_combined_influence_at_least = {
	custom_trigger_tooltip = {
		tooltip = IRE_combined_influence_at_least_tt
		set_temp_variable = { var = total_temp_influence value = GER.IRE_gateway_influence }
		add_to_temp_variable = { var = total_temp_influence value = ENG.IRE_gateway_influence }
		check_variable = { var = total_temp_influence value = IRE_combined_at_least compare = greater_than_or_equals }
	}
}

IRE_combined_influence_smaller_than = {
	custom_trigger_tooltip = {
		tooltip = IRE_combined_influence_smaller_than_tt
		set_temp_variable = { var = total_temp_influence value = GER.IRE_gateway_influence }
		add_to_temp_variable = { var = total_temp_influence value = ENG.IRE_gateway_influence }
		check_variable = { var = total_temp_influence value = IRE_combined_at_least compare = less_than_or_equals }
	}
}

IRE_GER_influence_at_least = {
	custom_trigger_tooltip = {
		tooltip = IRE_GER_influence_at_least_tt
		check_variable = { var = GER.IRE_gateway_influence value = IRE_GER_at_least compare = greater_than_or_equals }
	}
}

IRE_GER_influence_smaller_than = {
	custom_trigger_tooltip = {
		tooltip = IRE_GER_influence_smaller_than_tt
		check_variable = { var = GER.IRE_gateway_influence value = IRE_GER_smaller_than compare = less_than_or_equals }
	}
}

IRE_ENG_influence_at_least = {
	custom_trigger_tooltip = {
		tooltip = IRE_ENG_influence_at_least_tt
		check_variable = { var = ENG.IRE_gateway_influence value = IRE_ENG_at_least compare = greater_than_or_equals }
	}
}

IRE_ENG_influence_smaller_than = {
	custom_trigger_tooltip = {
		tooltip = IRE_ENG_influence_smaller_than_tt
		check_variable = { var = ENG.IRE_gateway_influence value = IRE_ENG_smaller_than compare = less_than_or_equals }
	}
}

IRE_GER_influence_larger_by = {
	custom_trigger_tooltip = {
		tooltip = IRE_GER_influence_larger_by_tt
		check_variable = { var = IRE_relative_GER_influence value = IRE_GER_larger_by compare = greater_than_or_equals }
	}
}

IRE_ENG_influence_larger_by = {
	custom_trigger_tooltip = {
		tooltip = IRE_ENG_influence_larger_by_tt
		check_variable = { var = IRE_relative_ENG_influence value = IRE_ENG_larger_by compare = greater_than_or_equals }
	}
}

IRE_balanced_influence = {
	IRE = {
		set_temp_variable = { IRE_GER_larger_by = 15 }
		set_temp_variable = { IRE_ENG_larger_by = 15 }
		IRE_GER_influence_larger_by = no
		IRE_ENG_influence_larger_by = no
	}
}

IRE_GER_winning_influence = {
	IRE = {
		set_temp_variable = { IRE_GER_larger_by = 15 }
		IRE_GER_influence_larger_by = yes
	}
}

IRE_ENG_winning_influence = {
	IRE = {
		set_temp_variable = { IRE_ENG_larger_by = 15 }
		IRE_ENG_influence_larger_by = yes
	}
}

IRE_gateway_IRE_victory_trigger = {
	if = {
		limit = { IRE_gateway_player_trigger = yes }
		IRE_balanced_influence = yes
	}
	else = {
		IRE = { has_country_flag = IRE_gatewaypath_neut }
	}
}

IRE_gateway_GER_victory_trigger = {
	if = {
		limit = { IRE_gateway_player_trigger = yes }
		IRE_GER_winning_influence = yes
	}
	else = {
		IRE = { has_country_flag = IRE_gatewaypath_rp }
	}
}

IRE_gateway_ENG_victory_trigger = {
	if = {
		limit = { IRE_gateway_player_trigger = yes }
		IRE_ENG_winning_influence = yes
	}
	else = {
		IRE = { has_country_flag = IRE_gatewaypath_ti }
	}
}

IRE_gateway_player_trigger = {
	OR = {
		IRE = { is_ai = no }
		GER = { is_ai = no }
		ENG = { is_ai = no }
	}
}

