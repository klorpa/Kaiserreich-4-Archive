#####################################
# Shandong Focus Tree
#####################################
# By DSFDaker with assitance from OMD
#####################################
# Lore by OMD
#####################################

focus_tree = {
	id = Shandong_Focus
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = SQI
		}
	}

	default = no
	continuous_focus_position = {
		x = 1500
		y = 1400
	}

	shared_focus = CHS_provisional_government
	shared_focus = CHS_reintegrate_academies
	shared_focus = CHS_standardised_arsenals
	shared_focus = CHS_southern_fleets_legacy

	focus = {
		id = SQI_two_zhangs_enter
		icon = GFX_SQI_Two_Zhangs_Enter
		cost = 10 #NOTE - this needs to be longer than it takes to complete the initial event chain or else Shandong.1000 will fire before a political path is decided

		x = 3
		y = 0

		available = {
			NOT = { has_country_flag = SQI_two_zhangs_enter_event_pause }
		}

		bypass = {
			SQI_is_led_by_zongchang = no
		}

		cancel_if_invalid = no
		cancelable = no

		select_effect = {
			log = "[GetDateText]: [Root.GetName]: Select Focus SQI_two_zhangs_enter"
			country_event = { id = shandong.2 days = 21 } #Need this delay to ensure that QIE chooses a side before SQI intervenes in League War (or not). QIE makes their choice around Feb 16th via qielepcollapse.8, we need shandong.1000 to fire maybe a few days after latest possible QIE decision. By my calculations, this will set the event to fire February 27thish
		}

		ai_will_do = { factor = 1000 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_two_zhangs_enter"
			custom_effect_tooltip = tooltip_immediate_effect_upon_focus_start
			effect_tooltip = { country_event = { id = shandong.2 days = 2 } }
			hidden_effect = { country_event = { id = shandong.1000 days = 2 } } #Give it a slight delay to avoid certain mishaps.
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	#Zhang Tianran

	focus = {
		id = SQI_announce_revelationary_order
		icon = GFX_goal_SQI_yiguandao
		cost = 1

		relative_position_id = SQI_two_zhangs_enter
		x = -2
		y = 1

		prerequisite = { focus = SQI_two_zhangs_enter }
		mutually_exclusive = {
			focus = SQI_benevolence_and_morality
			focus = SQI_story_of_a_bastard
		}

		available = {
			SQI_is_led_by_tianran = yes
			has_global_flag = LEP_collapse
		}
		available_if_capitulated = yes

		ai_will_do = { factor = 150 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_announce_revelationary_order"
			remove_ideas = SQI_flight_north
		}
	}

	focus = {
		id = SQI_destroy_the_drug_trade
		icon = GFX_goal_QIE_rat
		cost = 10

		relative_position_id = SQI_announce_revelationary_order
		x = 0
		y = 1

		prerequisite = { focus = SQI_announce_revelationary_order }

		available = {
			SQI_is_led_by_tianran = yes
		}
		available_if_capitulated = yes
		bypass_if_unavailable = yes

		ai_will_do = { factor = 150 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_destroy_the_drug_trade"
			add_stability = 0.05
			add_popularity = {
				ideology = national_populist
				popularity = 0.05
			}
			swap_ideas = {
				remove_idea = SQI_Rampant_drug_trade
				add_idea = SQI_violently_suppressed_drug_trade
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_STABILITY
		}
	}

	focus = {
		id = SQI_back_to_the_basics
		icon = GFX_goal_generic_mountain_warfare
		cost = 10

		relative_position_id = SQI_destroy_the_drug_trade
		x = -1
		y = 1

		prerequisite = { focus = SQI_destroy_the_drug_trade }

		available = {
			SQI_is_led_by_tianran = yes
		}
		available_if_capitulated = yes
		bypass_if_unavailable = yes

		ai_will_do = { factor = 150 }
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_back_to_the_basics"
			add_political_power = 75
			every_army_leader = {
				add_logistics = 1
				add_attack = 1
				add_defense = 1
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		#Absorbing the Guiyidao
		id = SQI_absorb_the_guiyidao
		icon = GFX_goal_china_yiguandao
		cost = 10

		relative_position_id = SQI_destroy_the_drug_trade
		x = 1
		y = 1

		prerequisite = { focus = SQI_destroy_the_drug_trade }

		available = {
			SQI_is_led_by_tianran = yes
		}
		available_if_capitulated = yes
		bypass_if_unavailable = yes

		ai_will_do = { factor = 150 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_absorb_the_guiyidao"
			add_popularity = {
				ideology = national_populist
				popularity = 0.10
			}
			add_ideas = SQI_Guiyidao_support
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	#Qu Yingguang

	focus = {
		id = SQI_benevolence_and_morality
		icon = GFX_goal_SQI_confucianism
		cost = 1

		relative_position_id = SQI_two_zhangs_enter
		x = 0
		y = 1

		prerequisite = { focus = SQI_two_zhangs_enter }

		mutually_exclusive = {
			focus = SQI_announce_revelationary_order
			focus = SQI_story_of_a_bastard
		}

		available = {
			SQI_is_led_by_yingguang = yes
			has_global_flag = LEP_collapse
		}
		bypass = {
			SQI_is_led_by_zongchang = no
			SQI_is_led_by_yingguang = no
			SQI_is_led_by_tianran = no
		}
		available_if_capitulated = yes

		ai_will_do = { factor = 150 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_benevolence_and_morality"
			swap_ideas = {
				remove_idea = SQI_flight_north
				add_idea = SQI_flight_to_safety
			}
			remove_ideas = SQI_Rampant_drug_trade
			custom_effect_tooltip = tooltip_white_line
			country_lock_all_division_template = no
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_STABILITY
		}
	}

	focus = {
		id = SQI_return_to_the_source
		icon = GFX_goal_QIE_modernize_monarchy
		cost = 13

		relative_position_id = SQI_benevolence_and_morality
		x = 0
		y = 1

		prerequisite = { focus = SQI_benevolence_and_morality }
		available = {
			SQI_is_led_by_yingguang = yes
			is_subject = no
			country_exists = QIE
			NOT = { has_war_with = QIE }
			OR = {
				is_in_faction = no
				is_in_faction_with = QIE
			}
			if = {
				limit = { has_global_flag = QIE_manchu_restoration }
				QIE = { china_is_aligned_with_manchu = yes }
			}
			else = {
				QIE = { china_is_aligned_with_zhili = yes }
			}
		}
		bypass_if_unavailable = yes

		ai_will_do = { factor = 150 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_return_to_the_source"
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = 0.15
			}
			QIE = {
				country_event = shandong.410
				custom_effect_tooltip = if_they_accept_tt
				custom_effect_tooltip = tooltip_white_line
				effect_tooltip = { china_puppet_ROOT_effect = yes }
			}
			hidden_effect = {
				country_event = { id = shandong.31 days = 5 }
			}
		}
	}

	#Zhang Zongchang

	focus = {
		id = SQI_story_of_a_bastard
		icon = GFX_goal_card_tricks
		cost = 1

		relative_position_id = SQI_two_zhangs_enter
		x = 2
		y = 1

		prerequisite = { focus = SQI_two_zhangs_enter }

		mutually_exclusive = {
			focus = SQI_announce_revelationary_order
			focus = SQI_benevolence_and_morality
		}

		available = {
			SQI_is_led_by_zongchang = yes
			has_global_flag = LEP_collapse
		}
		available_if_capitulated = yes

		ai_will_do = { factor = 150 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_story_of_a_bastard"
			swap_ideas = {
				remove_idea = SQI_flight_north
				add_idea = SQI_flee_to_zongchang
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_STABILITY
		}
	}

	focus = {
		id = SQI_honoured_teacher_lu_zhongjie
		icon = GFX_goal_consolidating_coalitionv2
		cost = 10

		relative_position_id = SQI_story_of_a_bastard
		x = 0
		y = 1

		prerequisite = { focus = SQI_story_of_a_bastard }

		available = {
			SQI_is_led_by_zongchang = yes
		}
		available_if_capitulated = yes
		bypass_if_unavailable = yes

		ai_will_do = { factor = 150 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_honoured_teacher_lu_zhongjie"
			add_political_power = 50
			add_stability = 0.05
			set_temp_variable = { ideology_change_var = 0.05 }
			change_ruling_party_popularity = yes
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { NOT = { SQI_lu_zhongjie = { has_advisor_role = political_advisor } } }
				add_advisor_role = {
					character = SQI_lu_zhongjie
					advisor = {
						slot = political_advisor
						idea_token = SQI_lu_zhongjie
						traits = { KR_spiritual_leader }
					}
				}
			}
			else = {
				custom_effect_tooltip = tooltip_white_line
				show_ideas_tooltip = SQI_lu_zhongjie
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_STABILITY
		}
	}

	focus = {
		id = SQI_besiege_mount_taishan
		icon = GFX_goal_LEP_against_yiguandao
		cost = 10

		relative_position_id = SQI_honoured_teacher_lu_zhongjie
		x = -1
		y = 1

		prerequisite = { focus = SQI_honoured_teacher_lu_zhongjie }

		available = {
			SQI_is_led_by_zongchang = yes
		}
		bypass_if_unavailable = yes

		ai_will_do = { factor = 150 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_besiege_mount_taishan"
			add_political_power = 100
			set_temp_variable = { ideology_change_var = 0.1 }
			change_ruling_party_popularity = yes
			add_one_random_civilian_factory = yes
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_INDUSTRY
		}
	}

	focus = {
		id = SQI_bolster_the_drug_trade
		icon = GFX_goal_opium
		cost = 10

		relative_position_id = SQI_honoured_teacher_lu_zhongjie
		x = 1
		y = 1

		prerequisite = { focus = SQI_honoured_teacher_lu_zhongjie }

		available = {
			SQI_is_led_by_zongchang = yes
		}
		available_if_capitulated = yes
		bypass_if_unavailable = yes

		ai_will_do = { factor = 150 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_bolster_the_drug_trade"
			add_stability = 0.05
			set_temp_variable = { ideology_change_var = 0.25 }
			change_ruling_party_popularity = yes
			swap_ideas = {
				remove_idea = SQI_Rampant_drug_trade
				add_idea = SQI_controlled_drug_trade
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_STABILITY
		}
	}

	#Conclusion

	focus = {
		id = SQI_shandong_model_province
		icon = GFX_goal_AST_freedom_of_the_press
		cost = 10

		relative_position_id = SQI_return_to_the_source
		x = 0
		y = 2

		prerequisite = {
			focus = SQI_back_to_the_basics
			focus = SQI_absorb_the_guiyidao
			focus = SQI_return_to_the_source
			focus = SQI_besiege_mount_taishan
			focus = SQI_bolster_the_drug_trade
		}

		ai_will_do = { factor = 150 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_shandong_model_province"
			add_stability = 0.1
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	#Army

	focus = {
		id = SQI_reaffirm_the_northeast_army
		icon = GFX_goal_army_guy
		cost = 10

		x = 11
		y = 0

		available = {
			has_completed_focus = SQI_two_zhangs_enter
		}

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				has_idea = SQI_flight_north
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_reaffirm_the_northeast_army"
			army_experience = 100
			add_war_support = 0.05
			if = {
				limit = {
					SQI_is_led_by_zongchang = no
					country_exists = QIE
					NOT = { has_war_with = QIE }
					QIE = { is_subject = no }
				}
				custom_effect_tooltip = tooltip_white_line
				activate_targeted_decision = { target = QIE decision = SQI_pull_strings_with_qing_industrialists }
			}
		}
		search_filters = {
			FOCUS_FILTER_WAR_SUPPORT
			FOCUS_FILTER_ARMY_XP
		}
	}

	focus = {
		id = SQI_an_army_of_professionals
		icon = GFX_focus_generic_military_mission
		cost = 10

		relative_position_id = SQI_reaffirm_the_northeast_army
		x = -1
		y = 1

		prerequisite = { focus = SQI_reaffirm_the_northeast_army }

		mutually_exclusive = { focus = SQI_an_army_of_fanatics }

		available = {
			SQI_is_led_by_tianran = no
		}

		ai_will_do = { factor = 50 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_an_army_of_professionals"
			add_doctrine_cost_reduction = {
				name = SQI_an_army_of_professionals
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SQI_replace_outdated_weapons
		icon = GFX_goal_military_academy
		cost = 10

		relative_position_id = SQI_an_army_of_professionals
		x = -1
		y = 1

		prerequisite = { focus = SQI_an_army_of_professionals }

		ai_will_do = { factor = 50 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_replace_outdated_weapons"
			add_tech_bonus = {
				name = SQI_replace_outdated_weapons
				bonus = 0.75
				uses = 2
				category = infantry_weapons
				category = artillery
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SQI_train_with_northern_cavalry
		icon = GFX_goal_generic_army_doctrines
		cost = 10

		relative_position_id = SQI_an_army_of_professionals
		x = 0
		y = 2

		prerequisite = { focus = SQI_an_army_of_professionals }

		ai_will_do = { factor = 50 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_train_with_northern_cavalry"
			add_tech_bonus = {
				name = SQI_train_with_northern_cavalry
				bonus = 0.75
				uses = 2
				category = motorized_equipment
			}
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = tech_semi_motorised_cav_effect
			hidden_effect = { set_technology = { tech_semi_motorised_cav = 1 popup = no } }
			custom_effect_tooltip = tooltip_white_line
			SQI_spawn_cavalry_units = yes
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SQI_improve_rail_supply_lines
		icon = GFX_goal_generic_seize_railway
		cost = 10

		relative_position_id = SQI_replace_outdated_weapons
		x = 0
		y = 2

		prerequisite = { focus = SQI_replace_outdated_weapons }

		ai_will_do = { factor = 50 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_improve_rail_supply_lines"
			add_one_random_military_factory = yes
			custom_effect_tooltip = tooltip_white_line
			add_ideas = SQI_railroad_assisted_army
		}
		search_filters = {
			FOCUS_FILTER_ARMY_BONUS
			FOCUS_FILTER_MANPOWER
			FOCUS_FILTER_INDUSTRY
		}
	}

	focus = {
		id = SQI_an_army_of_fanatics
		icon = GFX_goal_break_rifle
		cost = 10

		relative_position_id = SQI_reaffirm_the_northeast_army
		x = 1
		y = 1

		prerequisite = { focus = SQI_reaffirm_the_northeast_army }

		mutually_exclusive = { focus = SQI_an_army_of_professionals }

		available = {
			SQI_is_led_by_tianran = yes
		}

		ai_will_do = { factor = 50 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_an_army_of_fanatics"
			add_war_support = 0.15
			add_doctrine_cost_reduction = {
				name = SQI_an_army_of_fanatics
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
			custom_effect_tooltip = tooltip_white_line
			add_ideas = SQI_big_swords
		}
		search_filters = {
			FOCUS_FILTER_WAR_SUPPORT
			FOCUS_FILTER_ARMY_BONUS
			FOCUS_FILTER_MANPOWER
			FOCUS_FILTER_RESEARCH
		}
	}

	focus = {
		id = SQI_request_weapons_from_followers
		icon = GFX_goal_army_guy_2
		cost = 10

		relative_position_id = SQI_an_army_of_fanatics
		x = 1
		y = 1

		prerequisite = { focus = SQI_an_army_of_fanatics }

		ai_will_do = { factor = 50 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_request_weapons_from_followers"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 6000
			}
		}
	}

	focus = {
		id = SQI_learn_from_the_chahar_horsemen
		icon = GFX_goal_cavalry
		cost = 10

		relative_position_id = SQI_an_army_of_fanatics
		x = 0
		y = 2

		prerequisite = { focus = SQI_an_army_of_fanatics }

		ai_will_do = { factor = 50 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_learn_from_the_chahar_horsemen"
			add_tech_bonus = {
				name = SQI_learn_from_the_chahar_horsemen
				bonus = 0.75
				uses = 2
				category = support_tech
			}
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = tech_at_cavalry_effect
			hidden_effect = { set_technology = { tech_at_cavalry = 1 popup = no } }
			custom_effect_tooltip = tooltip_white_line
			SQI_spawn_cavalry_units = yes
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SQI_fight_for_the_master
		icon = GFX_goal_agrarian_soldiers
		cost = 10

		relative_position_id = SQI_request_weapons_from_followers
		x = 0
		y = 2

		prerequisite = { focus = SQI_request_weapons_from_followers }

		ai_will_do = { factor = 50 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_fight_for_the_master"
			army_experience = 50
			add_war_support = 0.2
			custom_effect_tooltip = tooltip_white_line
			swap_ideas = {
				remove_idea = SQI_big_swords
				add_idea = SQI_big_swords_and_red_spears
			}
		}
		search_filters = {
			FOCUS_FILTER_ANNEXATION
			FOCUS_FILTER_WAR_SUPPORT
			FOCUS_FILTER_ARMY_XP
			FOCUS_FILTER_MANPOWER
		}
	}

	focus = {
		id = SQI_modernise_officer_portfolios
		icon = GFX_focus_chi_whampoa_military_academy
		cost = 10

		relative_position_id = SQI_reaffirm_the_northeast_army
		x = 0
		y = 2

		prerequisite = {
			focus = SQI_an_army_of_professionals
			focus = SQI_an_army_of_fanatics
		}

		ai_will_do = { factor = 50 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_modernise_officer_portfolios"
			army_experience = 50
			navy_experience = 25
			air_experience = 25
		}
		search_filters = {
			FOCUS_FILTER_ARMY_XP
			FOCUS_FILTER_NAVY_XP
			FOCUS_FILTER_AIR_XP
		}
	}

	focus = {
		id = SQI_novel_military_projects
		icon = GFX_goal_munitions_factories
		cost = 10

		relative_position_id = SQI_modernise_officer_portfolios
		x = 0
		y = 2

		prerequisite = {
			focus = SQI_train_with_northern_cavalry
			focus = SQI_modernise_officer_portfolios
			focus = SQI_learn_from_the_chahar_horsemen
		}

		ai_will_do = { factor = 50 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_novel_military_projects"
			country_event = shandong.11
			custom_effect_tooltip = tooltip_white_line
			custom_effect_tooltip = tooltip_event_allows_choice
			SQI_add_tank_template = yes
			custom_effect_tooltip = tooltip_event_choice_or
			SQI_add_bicycle_template = yes
			custom_effect_tooltip = tooltip_event_choice_or
			SQI_add_mountaineer_template = yes
		}
	}

	focus = {
		id = SQI_modern_military_research
		icon = GFX_goal_great_science
		cost = 10

		relative_position_id = SQI_novel_military_projects
		x = 0
		y = 1

		prerequisite = {
			focus = SQI_improve_rail_supply_lines
			focus = SQI_novel_military_projects
			focus = SQI_fight_for_the_master
		}

		ai_will_do = { factor = 250 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_modern_military_research"
			add_research_slot_until_five = yes
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	#Industry

	focus = {
		id = SQI_revive_shandongs_industry
		icon = GFX_IRE_medium_industry
		cost = 10

		x = 18
		y = 0

		available = {
			has_completed_focus = SQI_two_zhangs_enter
		}

		ai_will_do = {
			factor = 120
			modifier = {
				factor = 0
				has_idea = SQI_flight_north
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_revive_shandongs_industry"
			add_one_random_civilian_factory = yes
			add_one_random_infrastructure = yes
			hidden_effect = {
				country_event = { id = shandong.12 days = 35 }
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SQI_reopen_mothballed_factories
		icon = GFX_focus_generic_industry_2
		cost = 10

		relative_position_id = SQI_revive_shandongs_industry
		x = 0
		y = 1

		prerequisite = { focus = SQI_revive_shandongs_industry }

		ai_will_do = { factor = 120 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_reopen_mothballed_factories"
			add_one_random_civilian_factory = yes
			add_one_random_military_factory = yes
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SQI_repair_the_jinan_qingdao_railway
		icon = GFX_goal_generic_railway_construction
		cost = 10

		relative_position_id = SQI_revive_shandongs_industry
		x = -1
		y = 2

		prerequisite = { focus = SQI_revive_shandongs_industry }

		ai_will_do = { factor = 120 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_repair_the_jinan_qingdao_railway"
			add_one_random_infrastructure = yes
			add_one_random_infrastructure = yes
			build_railway = {
				path = { 1069 10102 12074 1184 }
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { NOT = { has_tech = basic_train } }
				set_technology = { basic_train = 1 }
			}
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 10
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SQI_mineral_rights_leases
		icon = GFX_focus_generic_tungsten
		cost = 10

		relative_position_id = SQI_repair_the_jinan_qingdao_railway
		x = -1
		y = 1

		prerequisite = { focus = SQI_repair_the_jinan_qingdao_railway }

		ai_will_do = { factor = 120 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_mineral_rights_leases"
			add_ideas = SQI_mineral_rights_leases_idea
		}
	}

	focus = {
		id = SQI_empower_the_shandong_mining_cartel
		icon = GFX_goal_generic_construction2
		cost = 10

		relative_position_id = SQI_repair_the_jinan_qingdao_railway
		x = 0
		y = 2

		prerequisite = { focus = SQI_repair_the_jinan_qingdao_railway }

		ai_will_do = { factor = 120 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_empower_the_shandong_mining_cartel"
			add_one_random_military_factory = yes
			add_one_random_military_factory = yes
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SQI_shandong_university
		icon = GFX_goal_plantation_grants
		cost = 10

		relative_position_id = SQI_reopen_mothballed_factories
		x = 0
		y = 2

		available = {
			num_of_controlled_factories > 15
		}

		prerequisite = { focus = SQI_reopen_mothballed_factories }
		prerequisite = {
			focus = SQI_repair_the_jinan_qingdao_railway
			focus = SQI_improve_roads_to_beijing
		}

		ai_will_do = { factor = 120 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_shandong_university"
			add_research_slot_until_five = yes
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SQI_improve_roads_to_beijing
		icon = GFX_focus_empty_coffers
		cost = 10

		relative_position_id = SQI_revive_shandongs_industry
		x = 1
		y = 2

		prerequisite = { focus = SQI_revive_shandongs_industry }

		ai_will_do = { factor = 120 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_improve_roads_to_beijing"
			add_one_random_infrastructure = yes
			add_one_random_infrastructure = yes
			add_one_random_infrastructure = yes
			if = {
				limit = {
					SQI_is_led_by_zongchang = no
					country_exists = QIE
					NOT = { has_war_with = QIE }
					QIE = { is_subject = no }
				}
				custom_effect_tooltip = tooltip_white_line
				activate_targeted_decision = { target = QIE decision = SQI_pull_strings_with_qing_industrialists }
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SQI_court_northern_elites
		icon = GFX_goal_model_cities
		cost = 10

		relative_position_id = SQI_improve_roads_to_beijing
		x = 0
		y = 2

		prerequisite = { focus = SQI_improve_roads_to_beijing }

		ai_will_do = { factor = 120 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_court_northern_elites"
			add_one_random_civilian_factory = yes
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SQI_purchase_factories_in_tianjin
		icon = GFX_goal_LEC_establish
		cost = 10

		relative_position_id = SQI_improve_roads_to_beijing
		x = 1
		y = 1

		prerequisite = { focus = SQI_improve_roads_to_beijing }

		ai_will_do = { factor = 120 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_purchase_factories_in_tianjin"
			add_offsite_building = {
				type = industrial_complex
				level = 1
			}
			add_tech_bonus = {
				name = SQI_purchase_factories_in_tianjin
				bonus = 0.75
				uses = 2
				category = electronics
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	#Victory Section

	focus = {
		id = SQI_victory_in_the_south
		icon = GFX_goal_generic_attack_allies
		cost = 5

		x = 3
		y = 6

		available = {
			owns_state = 613
			NOT = { country_exists = LEP }
			NOT = { country_exists = CHI }
		}

		ai_will_do = { factor = 450 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_victory_in_the_south"
			add_stability = 0.1
			LEP_remove_collapse_dm = yes
			hidden_effect = {
				if = {
					limit = { NOT = { has_government = authoritarian_democrat } }
					country_event = shandong.500
				}
			}
		}
		search_filters = { FOCUS_FILTER_STABILITY }
	}

	#Building Path

	focus = {
		id = SQI_reclaim_despoiled_industry
		icon = GFX_LEC_Illegitimate_Economy
		cost = 5

		relative_position_id = SQI_victory_in_the_south
		x = 0
		y = 1

		prerequisite = { focus = SQI_victory_in_the_south }

		ai_will_do = { factor = 150 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_reclaim_despoiled_industry"
			set_temp_variable = { ideology_change_var = 0.05 }
			change_ruling_party_popularity = yes
			add_ideas = SQI_expand_our_control
		}
	}

	focus = {
		id = SQI_develop_the_coastline
		icon = GFX_Maritime_Silkroad_2
		cost = 10

		relative_position_id = SQI_reclaim_despoiled_industry
		x = 2
		y = 1

		prerequisite = { focus = SQI_reclaim_despoiled_industry }

		available = {
			598 = { is_owned_and_controlled_by_ROOT_or_subject = yes }
		}

		ai_will_do = { factor = 150 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_develop_the_coastline"
			598 = { prioritize_state = yes }
			add_one_random_civilian_factory = yes
			add_one_random_dockyard = yes
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SQI_develop_anqing
		icon = GFX_focus_generic_industry_2
		cost = 10

		relative_position_id = SQI_reclaim_despoiled_industry
		x = -2
		y = 1

		prerequisite = { focus = SQI_reclaim_despoiled_industry }

		available = {
			606 = { is_owned_and_controlled_by_ROOT_or_subject = yes }
		}

		ai_will_do = { factor = 150 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_develop_anqing"
			606 = { prioritize_state = yes }
			add_one_random_civilian_factory = yes
			add_one_random_military_factory = yes
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SQI_renovate_nanjing
		icon = GFX_focus_generic_industry_3
		cost = 10

		relative_position_id = SQI_reclaim_despoiled_industry
		x = 0
		y = 1

		prerequisite = { focus = SQI_reclaim_despoiled_industry }

		available = {
			613 = { is_owned_and_controlled_by_ROOT_or_subject = yes }
		}

		ai_will_do = { factor = 150 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_renovate_nanjing"
			613 = { prioritize_state = yes }
			add_one_random_civilian_factory = yes
			add_one_random_military_factory = yes
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SQI_complete_the_jinan_nanjing_railway
		icon = GFX_goal_generic_construct_infrastructure
		cost = 10

		relative_position_id = SQI_renovate_nanjing
		x = 0
		y = 1

		prerequisite = { focus = SQI_renovate_nanjing }

		ai_will_do = { factor = 150 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_complete_the_jinan_nanjing_railway"
			every_owned_state = {
				limit = {
					OR = {
						state = 597
						state = 613
						state = 1047
						state = 1050
					}
					is_controlled_by = ROOT
					is_valid_state_for_development = yes
					free_building_slots = { building = infrastructure size > 0 include_locked = yes }
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			build_railway = {
				start_state = 597
				target_state = 613
			}
			custom_effect_tooltip = tooltip_white_line
			if = {
				limit = { NOT = { has_tech = basic_train } }
				set_technology = { basic_train = 1 }
			}
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 10
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SQI_dayu_tungsten_mines
		icon = GFX_goal_generic_construct_civ_factory
		cost = 10

		relative_position_id = SQI_complete_the_jinan_nanjing_railway
		x = 0
		y = 1

		prerequisite = { focus = SQI_complete_the_jinan_nanjing_railway }

		available = {
			1044 = { is_owned_and_controlled_by_ROOT_or_subject = yes }
			1045 = { is_owned_and_controlled_by_ROOT_or_subject = yes }
		}

		ai_will_do = { factor = 150 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_dayu_tungsten_mines"
			1045 = { prioritize_state = yes }
			add_one_random_infrastructure = yes
			if = {
				limit = { 1044 = { NOT = { has_state_flag = SQI_tungsten_mines_developed } } }
				custom_effect_tooltip = tooltip_white_line
				activate_targeted_decision = { target = 1044 decision = SQI_develop_jiangxi_tungsten_decision }
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SQI_connect_fujians_communities
		icon = GFX_goal_generic_production2
		cost = 10

		relative_position_id = SQI_complete_the_jinan_nanjing_railway
		x = -2
		y = 1

		prerequisite = { focus = SQI_complete_the_jinan_nanjing_railway }

		available = {
			1046 = { is_owned_and_controlled_by_ROOT_or_subject = yes }
			595 = { is_owned_and_controlled_by_ROOT_or_subject = yes }
		}
		ai_will_do = { factor = 150 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_connect_fujians_communities"
			595 = { prioritize_state = yes }
			add_one_random_civilian_factory = yes
			if = {
				limit = { 1046 = { NOT = { has_state_flag = SQI_aluminium_mines_developed } } }
				custom_effect_tooltip = tooltip_white_line
				activate_targeted_decision = { target = 1046 decision = SQI_develop_fujian_aluminium_decision }
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SQI_rebuild_northern_zhejiang
		icon = GFX_focus_generic_industry_2
		cost = 10

		relative_position_id = SQI_complete_the_jinan_nanjing_railway
		x = 2
		y = 1

		prerequisite = { focus = SQI_complete_the_jinan_nanjing_railway }
		available = {
			1067 = { is_owned_and_controlled_by_ROOT_or_subject = yes }
			596 = { is_owned_and_controlled_by_ROOT_or_subject = yes }
		}
		ai_will_do = { factor = 150 }
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_rebuild_northern_zhejiang"
			596 = { prioritize_state = yes }
			add_one_random_civilian_factory = yes
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	#Beiyang Navy Path

	focus = {
		id = SQI_rebuild_the_beiyang_fleet
		icon = GFX_goal_generic_construct_naval_dockyard
		cost = 10

		x = 18
		y = 6

		available = {
			has_completed_focus = SQI_two_zhangs_enter
		}

		ai_will_do = { factor = 20 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_rebuild_the_beiyang_fleet"
			navy_experience = 50
			add_doctrine_cost_reduction = {
				name = SQI_rebuild_the_beiyang_fleet
				cost_reduction = 0.5
				uses = 1
				category = naval_doctrine
			}
			if = {
				limit = { SQI_is_led_by_zongchang = yes }
				custom_effect_tooltip = tooltip_white_line
				activate_targeted_decision = { target = SQI decision = SQI_obtain_dockyard_access }
			}
		}
		search_filters = {
			FOCUS_FILTER_NAVY_XP
			FOCUS_FILTER_NAVY_BONUS
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_RESEARCH
		}
	}

	focus = {
		id = SQI_steal_japanese_designs
		icon = GFX_goal_navy_decision
		cost = 10

		relative_position_id = SQI_rebuild_the_beiyang_fleet
		x = -1
		y = 1

		prerequisite = { focus = SQI_rebuild_the_beiyang_fleet }

		ai_will_do = { factor = 20 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_steal_japanese_designs"
			navy_experience = 25
			add_tech_bonus = {
				name = SQI_steal_japanese_designs
				bonus = 0.75
				uses = 2
				category = dd_tech
			}
			add_tech_bonus = {
				name = SQI_steal_japanese_designs
				bonus = 0.75
				uses = 2
				category = cl_tech
			}
			if = {
				limit = { has_dlc_mtg = yes }
				add_tech_bonus = {
					name = SQI_steal_japanese_designs
					bonus = 0.5
					uses = 3
					category = ship_modules_tech
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SQI_modernise_naval_bases
		icon = GFX_goal_generic_construct_naval_dockyard
		cost = 10

		relative_position_id = SQI_steal_japanese_designs
		x = 0
		y = 1

		prerequisite = { focus = SQI_steal_japanese_designs }

		ai_will_do = { factor = 20 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_modernise_naval_bases"
			add_one_random_dockyard = yes
			add_one_random_dockyard = yes
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SQI_purchase_convoys
		icon = GFX_goal_HOL_dutch_navy
		cost = 10

		relative_position_id = SQI_rebuild_the_beiyang_fleet
		x = 1
		y = 1

		prerequisite = { focus = SQI_rebuild_the_beiyang_fleet }

		ai_will_do = { factor = 20 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_purchase_convoys"
			add_doctrine_cost_reduction = {
				name = SQI_rebuild_the_beiyang_fleet
				cost_reduction = 0.5
				uses = 1
				category = naval_doctrine
			}
			add_equipment_to_stockpile = {
				type = convoy_1
				amount = 50
			}
		}
	}

	focus = {
		id = SQI_obtain_submarine_designs
		icon = GFX_goal_generic_navy_anti_submarine
		cost = 10

		relative_position_id = SQI_purchase_convoys
		x = 0
		y = 1

		prerequisite = { focus = SQI_purchase_convoys }

		ai_will_do = { factor = 20 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_obtain_submarine_designs"
			add_tech_bonus = {
				name = SQI_obtain_submarine_designs
				bonus = 0.75
				uses = 2
				category = ss_tech
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SQI_incorporate_qingdao_and_weihaiwei
		icon = GFX_goal_generic_coastal_navy
		cost = 10

		relative_position_id = SQI_rebuild_the_beiyang_fleet
		x = 0
		y = 3

		prerequisite = {
			focus = SQI_modernise_naval_bases
			focus = SQI_obtain_submarine_designs
		}

		available = {
			744 = { is_owned_and_controlled_by = ROOT }
			996 = { is_owned_and_controlled_by = ROOT }
		}

		ai_will_do = { factor = 20 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_incorporate_qingdao_and_weihaiwei"
			random_owned_controlled_state = {
				prioritize = { 744 }
				limit = {
					is_core_of = ROOT
					is_valid_state_for_development = yes
					free_building_slots = { building = dockyard size > 0 include_locked = yes }
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 996 }
				limit = {
					is_core_of = ROOT
					is_valid_state_for_development = yes
					free_building_slots = { building = dockyard size > 0 include_locked = yes }
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	#Airforce

	focus = {
		id = SQI_create_an_air_force
		icon = GFX_goal_generic_air_production
		cost = 10

		x = 11
		y = 7

		available = {
			has_completed_focus = SQI_two_zhangs_enter
		}

		ai_will_do = { factor = 25 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_create_an_air_force"
			air_experience = 25
			random_owned_controlled_state = {
				prioritize = { 597 }
				limit = {
					is_core_of = ROOT
					air_base > 0
					free_building_slots = { building = air_base size > 2 include_locked = yes }
				}
				add_building_construction = {
					type = air_base
					level = 3
					instant_build = yes
				}
			}
			if = {
				limit = {
					SQI_is_led_by_zongchang = no
					country_exists = QIE
					NOT = { has_war_with = QIE }
					QIE = { is_subject = no }
				}
				custom_effect_tooltip = tooltip_white_line
				activate_targeted_decision = { target = QIE decision = SQI_assemble_air_squadron }
			}
		}
		search_filters = {
			FOCUS_FILTER_AIR_XP
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_AIRFORCE_BONUS
		}
	}

	focus = {
		id = SQI_experimental_fighters
		icon = GFX_goal_generic_air_fighter_new
		cost = 10

		relative_position_id = SQI_create_an_air_force
		x = -2
		y = 1

		prerequisite = { focus = SQI_create_an_air_force }

		ai_will_do = { factor = 25 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_experimental_fighters"
			add_tech_bonus = {
				name = SQI_experimental_fighters
				bonus = 0.75
				uses = 2
				category = light_fighter
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SQI_train_fighter_pilots
		icon = GFX_goal_generic_air_fighter2_new
		cost = 10

		relative_position_id = SQI_experimental_fighters
		x = 0
		y = 1

		prerequisite = { focus = SQI_experimental_fighters }

		ai_will_do = { factor = 25 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_train_fighter_pilots"
			air_experience = 50
			add_doctrine_cost_reduction = {
				name = SQI_train_fighter_pilots
				cost_reduction = 0.5
				uses = 2
				category = air_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SQI_expand_the_jinan_airstrip
		icon = GFX_goal_generic_build_airforce
		cost = 10

		relative_position_id = SQI_create_an_air_force
		x = 0
		y = 1

		prerequisite = { focus = SQI_create_an_air_force }

		ai_will_do = { factor = 25 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_expand_the_jinan_airstrip"
			random_owned_controlled_state = {
				prioritize = { 597 }
				limit = {
					is_core_of = ROOT
					air_base > 0
					free_building_slots = { building = air_base size > 2 include_locked = yes }
				}
				add_building_construction = {
					type = air_base
					level = 3
					instant_build = yes
				}
			}
			add_one_random_military_factory = yes
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SQI_planes_over_the_bohai_sea
		icon = GFX_goal_generic_air_naval_bomber_new
		cost = 10

		relative_position_id = SQI_expand_the_jinan_airstrip
		x = 0
		y = 1

		prerequisite = { focus = SQI_expand_the_jinan_airstrip }

		ai_will_do = { factor = 25 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_planes_over_the_bohai_sea"
			add_tech_bonus = {
				name = SQI_planes_over_the_bohai_sea
				bonus = 0.75
				uses = 2
				category = naval_air
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SQI_airspace_protection
		icon = GFX_goal_generic_build_airforce
		cost = 10

		relative_position_id = SQI_create_an_air_force
		x = 2
		y = 1

		prerequisite = { focus = SQI_create_an_air_force }

		ai_will_do = { factor = 25 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_airspace_protection"
			if = {
				limit = { NOT = { has_tech = interwar_antiair } }
				set_technology = { interwar_antiair = 1 }
				add_tech_bonus = {
					name = CENmil_aa_positions
					bonus = 1
					uses = 1
					category = artillery
				}
			}
			else = {
				add_tech_bonus = {
					name = CENmil_aa_positions
					bonus = 0.5
					uses = 2
					category = artillery
				}
			}
			custom_effect_tooltip = tooltip_white_line
			random_owned_controlled_state = {
				prioritize = { 597 }
				limit = {
					is_core_of = ROOT
					air_base > 0
					anti_air_building < 5
				}
				add_building_construction = {
					type = anti_air_building
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SQI_bomber_aircraft
		icon = GFX_goal_generic_air_tactical_bomber_new
		cost = 10

		relative_position_id = SQI_airspace_protection
		x = 0
		y = 1

		prerequisite = { focus = SQI_airspace_protection }

		ai_will_do = { factor = 25 }

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SQI_bomber_aircraft"
			add_tech_bonus = {
				name = SQI_bomber_aircraft
				bonus = 0.75
				uses = 2
				category = cas_bomber
				category = tactical_bomber
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
}
