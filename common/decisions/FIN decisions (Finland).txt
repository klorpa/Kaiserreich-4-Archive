special_projects = {
	FIN_reinforce_the_mannerheim_line = {
		icon = fortress
		allowed = { always = no } 			# Activated by focus FIN_finnish_army
		available = {
			num_of_civilian_factories_available_for_projects > 2
		}

		visible = {
			146 = { is_owned_and_controlled_by = ROOT } #Karelia
			864 = { is_owned_and_controlled_by = ROOT } #Savo
		}

		cost = 25
		days_remove = 90
		fire_only_once = yes

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = { factor = 100 }

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove FIN_reinforce_the_mannerheim_line"
			146 = {
				add_building_construction = {
					type = bunker
					level = 2
					province = 9206
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 2
					province = 11156
					instant_build = yes
				}
			}
			864 = {
				add_building_construction = {
					type = bunker
					level = 2
					province = 6082
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 2
					province = 52
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 2
					province = 139
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 2
					province = 3030
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 2
					province = 9181
					instant_build = yes
				}
			}
		}
	}
}

foreign_politics = {
	FIN_join_nordic_federation = {
		icon = generic_political_discourse
		allowed = { always = no } 			# Activated upon formation of Nordic federation (scandinavia.1)
		available = {
			has_war = no
		}
		visible = {
			has_democratic_government = yes
			is_subject = no
			is_in_faction_with = FROM
			OR = {
				is_in_faction = no
				is_in_faction_with = FROM
			}
			FROM = {
				exists = yes
				has_democratic_government = yes
				is_subject = no
				NOT = { has_war_with = ROOT }
			}
		}
		fire_only_once = yes
		cost = 0
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				NOT = { has_game_rule = { rule = FIN_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = FIN_forpol option = FIN_FORPOL_SCA } }
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete FIN_join_nordic_federation target: [From.GetName]"
			FROM = { country_event = finland.123 }
		}
	}
}

FIN_join_faction_decisions = {
	FIN_join_nordic_council = {
		icon = generic_political_discourse

		allowed = { always = no }	# Activated upon formation of NC

		available = {
			OR = {
				RUS = { is_faction_leader = yes }
				SOV = { is_faction_leader = yes }
				threat > 0.6
			}
			NOT = { has_non_aggression_pact_with = RUS }
			NOT = { has_non_aggression_pact_with = SOV }
			at_peace_or_same_enemies_as_FROM = yes
		}

		visible = {
			has_democratic_government = yes
			is_subject = no
			is_in_faction = no
			FROM = {
				has_idea = SCA_nordic_council_idea
				NOT = { has_war_with = ROOT }
			}
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				FROM = {
					OR = {
						surrender_progress > 0.30
						any_owned_state = { is_claim_or_core_of_ROOT = yes }
					}
				}
				NOT = { has_game_rule = { rule = FIN_forpol option = FIN_FORPOL_SCA } }
			}
			modifier = {
				factor = 0
				NOT = { has_game_rule = { rule = FIN_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = FIN_forpol option = FIN_FORPOL_SCA } }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete FIN_join_nordic_council target: [From.GetName]"
			if = {
				limit = {
					FROM = {
						is_in_faction = yes
						is_faction_leader = no
					}
				}
				var:FROM.faction_leader = { country_event = finland.117 }
			}
			else_if = {
				limit = { FROM = { is_subject = yes } }
				var:FROM.overlord = { country_event = finland.117 }
			}
			else = {
				FROM = { country_event = finland.117 }
			}
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				add_ideas = SCA_nordic_council_idea
				if = {
					limit = { FROM = { is_in_faction = yes } }
					var:FROM.faction_leader = { add_to_faction = ROOT }
				}
			}
		}
	}

	FIN_join_reichspakt = {
		icon = generic_political_discourse
		allowed = {
			original_tag = FIN
		}

		available = {
			OR = {
				RUS = { is_faction_leader = yes }
				SOV = { is_faction_leader = yes }
				threat > 0.6
			}
			NOT = { has_non_aggression_pact_with = RUS }
			NOT = { has_non_aggression_pact_with = SOV }
			at_peace_or_same_enemies_as_FROM = yes
		}

		visible = {
			has_socialist_government = no
			if = {
				limit = { has_government = national_populist }
				country_exists = SOV
			}
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		targets = { GER }
		target_root_trigger = {
			OR = {
				has_completed_focus = FIN_the_monarchy
				NOT = { owns_state = 146 } #Karelia
				AND = {
					has_government = national_populist
					country_exists = SOV
				}
			}
		}
		target_trigger = {
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				FROM = { any_owned_state = { is_claim_or_core_of_ROOT = yes } }
				NOT = { has_game_rule = { rule = FIN_forpol option = FIN_FORPOL_GER } }
			}
			modifier = {
				factor = 0
				FROM = { surrender_progress > 0.25 }
				NOT = { has_game_rule = { rule = FIN_forpol option = FIN_FORPOL_GER } }
			}
			modifier = {
				factor = 0
				NOT = { has_completed_focus = FIN_the_monarchy }
				NOT = { has_game_rule = { rule = FIN_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = FIN_forpol option = FIN_FORPOL_GER } }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete FIN_join_reichspakt target: [From.GetName]"
			FROM = { country_event = finland.130 }
		}
	}

	fin_join_internationale = {
		icon = generic_political_discourse

		allowed = { always = no } # Activated upon revolution

		available = {
			OR = {
				RUS = { is_faction_leader = yes }
				SOV = { is_faction_leader = yes }
				threat > 0.6
			}
			at_peace_or_same_enemies_as_FROM = yes
		}

		visible = {
			has_socialist_government = yes
			FROM = {
				is_faction_leader = yes
				has_socialist_government = yes
				NOT = { has_war_with = ROOT }
			}
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				FROM = { surrender_progress > 0.25 }
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete fin_join_internationale target: [From.GetName]"
			if = {
				limit = { SOV = { is_faction_leader = yes } }
				SOV = { country_event = finland.120 }
			}
			else = {
				FROM = { country_event = finland.120 }
			}
		}
	}
}
